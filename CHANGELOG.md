# CHANGELOG

* 0.3.0-SNAPHSOT
    - Fixed a minor bug whereby 'meta' of registrations in RC and SC were not updated
    - Added Dockerfile to build docker container directly from the source code
    - Fixed a minor bug of RC/SC remoteclient ignoring the server response on adding new registrations
    - Changes to Resource Catalog API [0.2.0 -> 1.0.0]
      + Added URL to device/resource to provide the relative URL (/rc/{devices|resources}/<id>)
      + ID is now a unique string. During the registration:
        * If POST /rc/devices/ -> id generated by server (urn:ls_device:<id>)
        * If PUT /rc/devices/<id> and device does not exist -> the specified id is used to create the device
        * In both above methods, if the resource id is not specified -> id generated by server (urn:ls_resource:<id>)
      + In GET /rc/devices/* , only URL of resources are returned, rather than the resource representation
      + The following fields are omitted if empty/zero: Name, Description, Representation, Meta, Ttl, Expires
      + A device never expires if Ttl is not set. Ttl=-1 is no longer valid.
      + Index now returns information about the service/api
      + Two catalog endpoints are added (both with pagination):
        * /devices - return an array of `Devices with resource URLs`
        * /resources - return an array of `Resources with the device URL`
      + New filtering paths are (both with pagination):
        * /devices/<path>/<op>/<value>
        * /resources/<path>/<op>/<value>
    - Changes to Service Catalog API [0.2.0 -> 1.0.0]
          + Added URL to service, providing the relative service URL (/sc/<id>)
          + ID is now a unique string. During the registration:
            * If POST /sc/ -> id generated by server (urn:ls_service:<id>)
            * If PUT /sc/<id> and service does not exist -> the specified id is used to create the service
          + An ID with more than one slash is no longer valid.
          + The following fields are omitted if empty/zero: Name, Description, Representation, Meta, Ttl, Expires
          + A service never expires if Ttl is not set. Ttl=-1 is no longer valid.
          + New filtering path is 
            * /<path>/<op>/<value> (with pagination)

* 0.2.0
    - Migration from Godepts to GB vendor
    - Updated github.com/oleksandr/bonjour package and its usage:
      + New method for shutdown
    - Updated github.com/gorilla/mux package and it usage:
      + New RegEx format for variable path depths
    - Changed code.google.com/p/go-uuid/uuid to github.com/pborman/uuid 
      + Google Code is no longer go gettable
    - Replaced PublicAddr with PublichEndpoint:
      + Allows to use custom <protocol>://<addr>:<port> for local endpoints when publishing to catalogs etc. E.g., can be used together with reverse proxy.
    - Added (optional) authentication and authorization support for HTTP APIs
      + optional AUTH struct in config files of services and clients
      + Server side (service/resource catalogs, device-gateway)
          * (optional) AUTH struct in config files for server configuration
      + Client side (service/resource catalogs clients, device-gateway)
          * remote catalogs clients: all HTTP requests through a custom HTTP client with AUTH support
      + Support for multiple AUTH providers (drivers)
    - Added LevelDB storage backend for service/resource catalogs
      + Configurable backend for service/resource catalogs clients, device-gateway
    - Added Proxy-based storage implementation to resource catalog
      + Implementation in resource/proxystorage.go
      + Added/Modified methods in resource/remoteclient.go
          * Added GetResource
          * GetDevices->GetMany, fixed a bug in devicesFromResponse func
          * Updated corresponding interfaces in resource/client.go
      + Added rc-proxy (resource-catalog proxy), a client for Proxy-based resource catalog
    - Minor API modifications
      + Error handling
          * All storage interfaces return errors (service/resource catalogs)
          * Handling errors in catalogapi.go (service/resource catalogs)
      + Optimized 'resources' filtering
          * CatalogStorage.pathFilterResources returns Devices instead
          * CatalogClient.FindResources returns Devices instead
      + Removed devicesFromResources() from storage interface methods (resource catalog)
      + Added Close() to storage interface (service/resource catalogs)
      + Changed Device.Expires/Service.Expires to pointer, set to null if TTL < 0 (resource/service catalog)
      + Path Filtering supports data types other than string (e.g. int, float, bool)
    - MQTT:
      + Configurable MQTT topic via 'pub_topc' in the device protocol (see sample configs)
      + Updated git.eclipse.org/gitroot/paho/org.eclipse.paho.mqtt.golang.git (minor API changes in the newer package version)
      + MQTT SUB: allow changing resource state via MQTT (similar to HTTP PUT)
    - Added Dockerfile to build a docker container directly from the source code
